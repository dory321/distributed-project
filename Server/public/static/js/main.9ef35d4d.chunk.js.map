{"version":3,"sources":["components/TextEditor.js","components/HomeScreen.js","App.js","index.js"],"names":["TOOLBAR_OPTIONS","header","font","size","list","color","background","script","align","TextEditor","useState","socket","setSocket","quill","setQuill","documentId","useParams","id","WrapperRef","useCallback","wrapper","innerHTML","editor","document","createElement","append","q","Quill","theme","modules","toolbar","history","delay","userOnly","disable","setText","useEffect","s","io","disconnect","handler","delta","oldDelta","source","emit","on","off","updateContents","interval","setInterval","getContents","clearInterval","once","setContents","enable","className","ref","HomeScreen","docId","setDocId","src","alt","value","onChange","e","target","placeholder","type","to","href","App","exact","path","uuidV4","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.9ef35d4d.chunk.js","sourcesContent":["import { useCallback, useEffect, useState } from 'react';\nimport 'quill/dist/quill.snow.css';\nimport Quill from 'quill';\nimport io from 'socket.io-client';\nimport { useParams } from 'react-router-dom';\n\nconst HEROKU_ADD = 'https://lit-fjord-27068.herokuapp.com/';\n\nconst TOOLBAR_OPTIONS = [\n  [{ header: [1, 2, 3, 4, 5, 6, false] }],\n  [{ font: [] }],\n  [{ size: ['small', false, 'large', 'huge'] }],\n  [{ list: 'ordered' }, { list: 'bullet' }],\n  ['bold', 'italic', 'underline'],\n  [{ color: [] }, { background: [] }],\n  [{ script: 'sub' }, { script: 'super' }],\n  [{ align: [] }],\n  ['image', 'blockquote', 'code-block'],\n  ['clean'],\n];\n\nconst TextEditor = () => {\n  const [socket, setSocket] = useState();\n  const [quill, setQuill] = useState();\n  const { id: documentId } = useParams();\n\n  // setting up the editor\n  const WrapperRef = useCallback((wrapper) => {\n    if (wrapper === null) return;\n    wrapper.innerHTML = '';\n    const editor = document.createElement('div');\n    wrapper.append(editor);\n    const q = new Quill(editor, {\n      theme: 'snow',\n      modules: { toolbar: TOOLBAR_OPTIONS },\n      history: {\n        delay: 2000,\n        userOnly: true,\n      },\n    });\n    q.disable();\n    q.setText('Loading....');\n    setQuill(q);\n  }, []);\n\n  // Setting up the connection to server\n  useEffect(() => {\n    const s = io(HEROKU_ADD);\n    setSocket(s);\n    return () => {\n      s.disconnect();\n    };\n  }, []);\n\n  // capturing the changes and sending it to the server\n  useEffect(() => {\n    if (socket == null || quill == null) return;\n    const handler = (delta, oldDelta, source) => {\n      if (source !== 'user') return;\n      socket.emit('send-changes', delta);\n    };\n    quill.on('text-change', handler);\n\n    return () => {\n      quill.off('text-change', handler);\n    };\n  }, [socket, quill]);\n\n  // update content with the changes made\n  useEffect(() => {\n    if (socket == null || quill == null) return;\n    const handler = (delta) => {\n      quill.updateContents(delta);\n    };\n    socket.on('receive-changes', handler);\n\n    return () => {\n      socket.off('receive-changes', handler);\n    };\n  }, [socket, quill]);\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      socket.emit('save-doc', quill.getContents());\n    }, 2000);\n\n    return () => {\n      clearInterval(interval);\n    };\n  }, [socket, quill]);\n\n  useEffect(() => {\n    if (socket == null || quill == null) return;\n\n    socket.once('load-document', (document) => {\n      quill.setContents(document);\n      quill.enable();\n    });\n\n    socket.emit('get-document', documentId);\n  }, [socket, quill, documentId]);\n\n  // div having the editor\n  return <div className=\"container\" ref={WrapperRef}></div>;\n};\n\nexport default TextEditor;\n","import { Link } from 'react-router-dom';\nimport '../home.css';\nconst HomeScreen = ({ docId, setDocId }) => {\n  const inputHandler = (e) => {\n    setDocId(e.target.value);\n  };\n  return (\n    <div className=\"home-container\">\n      <div className=\"home-card\">\n        <img src=\"google-docs.png\" alt=\"\" />\n        <input\n          value={docId}\n          onChange={inputHandler}\n          placeholder=\"Document ID of existing document\"\n          type=\"text\"\n        />\n        <div className=\"home-btns\">\n          <Link to={docId && `/rooms/documents/${docId}`}>\n            <button>Open Document</button>\n          </Link>\n          <Link to=\"/rooms\">\n            <button>New Document</button>\n          </Link>\n        </div>\n        <div className=\"home-instruction\">\n          <p>Document Id can be found in the URL following </p>\n          <p>/document/ (or)</p>\n          <p>Click on new document</p>\n        </div>\n        <h4 className=\"home-footer\">\n          Google Docs Clone -{' '}\n          <a href=\"https://github.com/Kishore901\">\n            <u>Kishore</u>\n          </a>\n        </h4>\n      </div>\n    </div>\n  );\n};\n\nexport default HomeScreen;\n","import './App.css';\nimport TextEditor from './components/TextEditor';\nimport {\n  BrowserRouter as Router,\n  Route,\n  Switch,\n  Redirect,\n} from 'react-router-dom';\nimport { useState } from 'react';\nimport { v4 as uuidV4 } from 'uuid';\nimport HomeScreen from './components/HomeScreen';\nfunction App() {\n  const [docId, setDocId] = useState('');\n  return (\n    <Router>\n      <Switch>\n        <Route exact path=\"/\">\n          <HomeScreen docId={docId} setDocId={setDocId} />\n        </Route>\n        <Route exact path=\"/rooms\">\n          <Redirect to={`/rooms/documents/${uuidV4()}`} />\n        </Route>\n        <Route path=\"/rooms/documents/:id\">\n          <TextEditor />\n        </Route>\n      </Switch>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}